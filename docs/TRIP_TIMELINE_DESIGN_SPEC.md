# Trip Timeline Design Specification

## Executive Summary

The Trip Timeline is a 10X feature designed to transform MonkeyTravel from a trip planning utility into a comprehensive travel companion that engages users before, during, and after their trips. This document provides exhaustive specifications for implementing the feature with premium UX and design.

---

## 1. Information Architecture

### 1.1 Trip Lifecycle States

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           TRIP LIFECYCLE                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   PLANNING  â”‚â”€â”€â”€â–¶â”‚  PRE-TRIP   â”‚â”€â”€â”€â–¶â”‚   ACTIVE    â”‚â”€â”€â”€â–¶â”‚ COMPLETED   â”‚  â”‚
â”‚  â”‚   (draft)   â”‚    â”‚ (confirmed) â”‚    â”‚  (ongoing)  â”‚    â”‚  (memory)   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚                   â”‚                  â”‚                  â”‚           â”‚
â”‚       â–¼                   â–¼                  â–¼                  â–¼           â”‚
â”‚  - AI Generation     - Countdown       - Live Tracking     - Photo Album   â”‚
â”‚  - Edit Mode         - Checklist       - Activity Rating   - Trip Stats    â”‚
â”‚  - Share Draft       - Reminders       - Photo Capture     - Share Memory  â”‚
â”‚  - Budget Planning   - Weather Prep    - Real-time Notes   - Ratings       â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 Timeline Data Model Extension

```typescript
// New fields to add to Activity type
interface ActivityTimeline {
  // Pre-trip
  is_booked?: boolean;
  booking_confirmation?: string;
  booking_url?: string;

  // During trip
  status: 'upcoming' | 'in_progress' | 'completed' | 'skipped';
  started_at?: string; // ISO timestamp
  completed_at?: string;
  actual_duration_minutes?: number;

  // Rating & feedback
  rating?: 1 | 2 | 3 | 4 | 5;
  experience_notes?: string;

  // Photos
  photos?: ActivityPhoto[];

  // Quick reactions
  reactions?: ('loved' | 'okay' | 'skip_next_time')[];
}

interface ActivityPhoto {
  id: string;
  url: string;
  thumbnail_url: string;
  caption?: string;
  taken_at: string;
  is_favorite?: boolean;
}

// New Trip-level timeline fields
interface TripTimeline {
  // Status tracking
  current_day?: number;
  current_activity_id?: string;

  // Pre-trip checklist
  checklist?: ChecklistItem[];

  // Weather & conditions
  weather_forecast?: DayWeather[];

  // Trip statistics (calculated)
  stats?: TripStats;

  // Memory album (post-trip)
  album_generated?: boolean;
  highlight_photos?: string[]; // photo IDs
}

interface ChecklistItem {
  id: string;
  text: string;
  is_checked: boolean;
  category: 'booking' | 'packing' | 'document' | 'custom';
  due_date?: string;
}

interface TripStats {
  total_activities: number;
  completed_activities: number;
  skipped_activities: number;
  total_photos: number;
  average_rating: number;
  total_walking_km: number;
  total_travel_time_minutes: number;
  favorite_activity?: string;
}
```

### 1.3 Navigation Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         TIMELINE NAVIGATION FLOW                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                               â”‚
â”‚  My Trips Page                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ [Happening Now] â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Prominent section with live trip card        â”‚ â”‚
â”‚  â”‚ [Upcoming]                                                               â”‚ â”‚
â”‚  â”‚ [Past Adventures]                                                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                    â”‚                                                          â”‚
â”‚                    â–¼                                                          â”‚
â”‚  Trip Detail Page (with Timeline Tab)                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚ â”‚
â”‚  â”‚  â”‚Itineraryâ”‚ â”‚Timeline â”‚ â”‚ Photos  â”‚  â—„â”€â”€ Tab navigation                â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚ â”‚
â”‚  â”‚                                                                          â”‚ â”‚
â”‚  â”‚  Itinerary: Current edit/view mode (unchanged)                          â”‚ â”‚
â”‚  â”‚  Timeline: New chronological journey view                               â”‚ â”‚
â”‚  â”‚  Photos: Gallery of trip photos (post-trip focus)                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Component Specifications

### 2.1 Pre-Trip Components

#### 2.1.1 Countdown Hero
**Location**: Top of trip detail page when trip is confirmed and upcoming

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚     â”‚                    [Destination Image]                            â”‚    â”‚
â”‚     â”‚                                                                   â”‚    â”‚
â”‚     â”‚     â•”â•â•â•â•â•â•â•â•— â•”â•â•â•â•â•â•â•â•— â•”â•â•â•â•â•â•â•â•— â•”â•â•â•â•â•â•â•â•—                     â”‚    â”‚
â”‚     â”‚     â•‘  12   â•‘ â•‘  04   â•‘ â•‘  22   â•‘ â•‘  15   â•‘                     â”‚    â”‚
â”‚     â”‚     â•‘ DAYS  â•‘ â•‘ HOURS â•‘ â•‘ MINS  â•‘ â•‘ SECS  â•‘                     â”‚    â”‚
â”‚     â”‚     â•šâ•â•â•â•â•â•â•â• â•šâ•â•â•â•â•â•â•â• â•šâ•â•â•â•â•â•â•â• â•šâ•â•â•â•â•â•â•â•                     â”‚    â”‚
â”‚     â”‚                                                                   â”‚    â”‚
â”‚     â”‚     "Your adventure to Rome begins soon"                         â”‚    â”‚
â”‚     â”‚                                                                   â”‚    â”‚
â”‚     â”‚     [Weather: 24Â°C Sunny] [5 Days] [12 Activities]               â”‚    â”‚
â”‚     â”‚                                                                   â”‚    â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Design Tokens**:
- Background: Destination cover image with 40% dark gradient overlay
- Countdown boxes: Glass morphism (`backdrop-blur-xl bg-white/20`)
- Number font: Playfair Display Bold, 32px (mobile), 48px (desktop)
- Label font: Source Sans Pro, 10px uppercase tracking-widest
- Accent color: `var(--accent)` (#FFD93D) for highlights

**Component File**: `components/timeline/CountdownHero.tsx`

```typescript
interface CountdownHeroProps {
  destination: string;
  startDate: Date;
  tripDays: number;
  activitiesCount: number;
  weatherForecast?: { temp: number; condition: string };
  coverImageUrl?: string;
}
```

#### 2.1.2 Pre-Trip Checklist Card
**Location**: Below hero, collapsible section

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â–¼ Trip Preparation                                            [4/8 done]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  BOOKINGS                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ [âœ“] Book flights                                          Confirmed     â”‚â”‚
â”‚  â”‚ [âœ“] Reserve hotel                                         Confirmed     â”‚â”‚
â”‚  â”‚ [ ] Book Colosseum tickets              Due: Dec 10       [Book Now â†’]  â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                              â”‚
â”‚  PACKING                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ [âœ“] Passport & visa                                                     â”‚â”‚
â”‚  â”‚ [ ] Travel adapter                                                      â”‚â”‚
â”‚  â”‚ [ ] Comfortable walking shoes                                           â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                              â”‚
â”‚  [+ Add custom item]                                                         â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Design Tokens**:
- Card: `bg-white rounded-2xl border border-slate-200 shadow-sm`
- Section headers: Source Sans Pro 11px uppercase, `text-slate-500`
- Checkbox: Custom coral color when checked (`var(--primary)`)
- Due dates: Amber badge for items due within 3 days
- Progress: Circular progress indicator in header

**Component File**: `components/timeline/PreTripChecklist.tsx`

#### 2.1.3 Weather Forecast Strip
**Location**: Sticky or inline, showing 7-day forecast

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Weather for your trip                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ â˜€ï¸  â”‚  â”‚ â›… â”‚  â”‚ â˜€ï¸  â”‚  â”‚ ğŸŒ§ï¸ â”‚  â”‚ â˜€ï¸  â”‚  â”‚ â˜€ï¸  â”‚  â”‚ â›… â”‚                    â”‚
â”‚  â”‚24Â°Câ”‚  â”‚22Â°Câ”‚  â”‚25Â°Câ”‚  â”‚18Â°Câ”‚  â”‚23Â°Câ”‚  â”‚24Â°Câ”‚  â”‚21Â°Câ”‚                    â”‚
â”‚  â”‚Mon â”‚  â”‚Tue â”‚  â”‚Wed â”‚  â”‚Thu â”‚  â”‚Fri â”‚  â”‚Sat â”‚  â”‚Sun â”‚                    â”‚
â”‚  â”‚D 1 â”‚  â”‚D 2 â”‚  â”‚D 3 â”‚  â”‚D 4 â”‚  â”‚D 5 â”‚  â”‚    â”‚  â”‚    â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”˜                    â”‚
â”‚                                    â–²                                         â”‚
â”‚                              Rain expected                                   â”‚
â”‚                              Pack umbrella!                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Design Tokens**:
- Horizontal scroll on mobile with snap points
- Current day highlighted with `ring-2 ring-[var(--primary)]`
- Rain days highlighted with light blue background
- Temperature: Playfair 18px bold
- Smart tips appear for weather changes

**Component File**: `components/timeline/WeatherForecast.tsx`

---

### 2.2 Active Trip (Live Mode) Components

#### 2.2.1 Live Journey Header
**Location**: Replaces countdown hero when trip is active

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           LIVE JOURNEY MODE                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  Day 3 of 5 â€¢ Rome                                      [View Full Map â†’]   â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚  â—â”â”â”â”â”â”â”â”â”â”â”â”â”â—â”â”â”â”â”â”â”â”â”â”â”â”â”â—â”â”â”â”â”â”â”â”â”â”â”â”â”â—‹â”â”â”â”â”â”â”â”â”â”â”â”â”â—‹                  â”‚
â”‚  Day 1        Day 2        Day 3        Day 4        Day 5                  â”‚
â”‚                              â–²                                               â”‚
â”‚                           NOW                                                â”‚
â”‚                                                                              â”‚
â”‚  Current Activity: Lunch at Trattoria da Enzo                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ğŸ In Progress                                          2h 15m left    â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  Next: Vatican Museums at 14:30                         in 2h 45m       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Design Tokens**:
- Progress dots: Filled coral for completed, outlined for upcoming
- Current indicator: Pulsing animation (`animate-pulse`)
- Time remaining: Countdown timer that updates every minute
- Glass card for current/next activity preview

**Component File**: `components/timeline/LiveJourneyHeader.tsx`

#### 2.2.2 Live Activity Card
**Location**: In timeline view during active trip

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  09:30 â€¢ In Progress                              â—‹ â—‹ â—‹ â—‹ â—‹  Rate later â”‚â”‚
â”‚  â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  [Photo from    ]  Colosseum Tour                                       â”‚â”‚
â”‚  â”‚  [Google Places ]                                                       â”‚â”‚
â”‚  â”‚                    Ancient gladiator arena and Rome's most              â”‚â”‚
â”‚  â”‚                    iconic landmark                                       â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚â”‚
â”‚  â”‚  â”‚  ğŸ“ Piazza del Colosseo                           [Navigate â†’]      â”‚â”‚â”‚
â”‚  â”‚  â”‚  â±ï¸ 2 hours                                                          â”‚â”‚â”‚
â”‚  â”‚  â”‚  ğŸ’° â‚¬18                                                              â”‚â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚â”‚
â”‚  â”‚  â”‚  ğŸ“· Photo    â”‚  â”‚  âœï¸ Note     â”‚  â”‚  â­ï¸ Skip     â”‚                  â”‚â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚                  â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Activity completed? â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                    â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  [        â¬¤ Slide to Mark Complete â†’                    ]               â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Design Tokens**:
- Status pill: "In Progress" with pulsing dot animation
- Action buttons: Icon + label, subtle hover states
- Slide to complete: Coral track with white knob, haptic feedback on completion
- Quick photo: Opens camera immediately, no extra taps
- Rating stars: Empty circles during, fill on completion

**Micro-interactions**:
1. "In Progress" badge pulses gently every 2s
2. Slide to complete has elastic overshoot animation
3. On completion: Card briefly glows, confetti particles
4. Rating stars animate in sequence after completion

**Component File**: `components/timeline/LiveActivityCard.tsx`

#### 2.2.3 Quick Photo Capture
**Location**: Bottom sheet / modal

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”                                                                â”‚
â”‚                                                                              â”‚
â”‚                              ğŸ“·                                              â”‚
â”‚                                                                              â”‚
â”‚            Add a photo to "Colosseum Tour"                                  â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚                     [Camera Viewfinder]                                 â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Add caption (optional)                                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚               â”‚         â—‰ Capture              â”‚                            â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                                              â”‚
â”‚  [Gallery]                                           [Switch Camera]        â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Design Tokens**:
- Bottom sheet: Drag to dismiss, snap points at 50% and 100%
- Capture button: Large 72px circle with coral ring
- Camera preview: Full-width, rounded corners
- Quick access: Gallery picker in corner for existing photos

**Component File**: `components/timeline/QuickPhotoCapture.tsx`

#### 2.2.4 Activity Rating Modal
**Location**: Modal after completing an activity

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚               âœ¨ Activity Complete!                                         â”‚
â”‚                                                                              â”‚
â”‚               [Colosseum Tour Photo]                                        â”‚
â”‚                                                                              â”‚
â”‚               How was it?                                                   â”‚
â”‚                                                                              â”‚
â”‚               â­ â­ â­ â­ â­                                                â”‚
â”‚               Tap to rate                                                   â”‚
â”‚                                                                              â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚               â”‚  Add a quick note (optional)                              â”‚ â”‚
â”‚               â”‚  "Amazing views! Tip: go early to avoid crowds"           â”‚ â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚               Quick tags:                                                   â”‚
â”‚               [Must-do] [Crowded] [Worth it] [Skip next time]              â”‚
â”‚                                                                              â”‚
â”‚                                                                              â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚               â”‚                    Continue                               â”‚ â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                              â”‚
â”‚               [Skip for now]                                                â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Design Tokens**:
- Modal: Slides up from bottom on mobile, centered on desktop
- Stars: Large (48px) with satisfying fill animation
- Quick tags: Pill buttons with toggle state
- Continue button: Full-width coral, proceeds to next activity
- Skip: Subtle text link, no guilt-inducing design

**Micro-interactions**:
1. Stars fill with bounce animation on tap
2. Quick tags toggle with subtle scale effect
3. Modal entrance: Fade + slide up

**Component File**: `components/timeline/ActivityRatingModal.tsx`

---

### 2.3 Post-Trip (Memory) Components

#### 2.3.1 Trip Complete Hero
**Location**: Replaces hero when trip ends

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚                    ğŸ‰ Trip Complete!                                  â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚                    Rome Adventure                                     â”‚  â”‚
â”‚  â”‚                    Dec 5-10, 2025                                     â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚  â”‚
â”‚  â”‚  â”‚   12    â”‚  â”‚  4.2    â”‚  â”‚   23    â”‚  â”‚  15.3   â”‚                 â”‚  â”‚
â”‚  â”‚  â”‚Activitiesâ”‚  â”‚Avg Ratingâ”‚  â”‚ Photos  â”‚  â”‚   km    â”‚                 â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  [View Memories]                      [Share Trip Summary]           â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Component File**: `components/timeline/TripCompleteHero.tsx`

#### 2.3.2 Photo Album / Memories Tab
**Location**: New tab in trip detail page

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Memories                                              [Create Slideshow]   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  Day 1 â€¢ Arrival                                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚  â”‚ â­      â”‚ â”‚         â”‚ â”‚         â”‚                                       â”‚
â”‚  â”‚ [Photo] â”‚ â”‚ [Photo] â”‚ â”‚ [Photo] â”‚                                       â”‚
â”‚  â”‚         â”‚ â”‚         â”‚ â”‚         â”‚                                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚  Checked into hotel      First gelato!                                      â”‚
â”‚                                                                              â”‚
â”‚  Day 2 â€¢ Colosseum & Forum                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚  â”‚ â­      â”‚ â”‚         â”‚ â”‚ â­      â”‚ â”‚         â”‚                           â”‚
â”‚  â”‚ [Photo] â”‚ â”‚ [Photo] â”‚ â”‚ [Photo] â”‚ â”‚ [Photo] â”‚                           â”‚
â”‚  â”‚         â”‚ â”‚         â”‚ â”‚         â”‚ â”‚         â”‚                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚  Inside the Colosseum    Forum views    Sunset shot    Dinner at...         â”‚
â”‚                                                                              â”‚
â”‚  Day 3 â€¢ Vatican Day                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚  â”‚ â­      â”‚ â”‚         â”‚                                                   â”‚
â”‚  â”‚ [Photo] â”‚ â”‚ [Photo] â”‚   [+ Add more photos]                             â”‚
â”‚  â”‚         â”‚ â”‚         â”‚                                                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚  Sistine Chapel          St. Peter's                                        â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Design Tokens**:
- Photo grid: Masonry layout, 3 columns desktop, 2 mobile
- Favorite indicator: Gold star badge in corner
- Captions: Truncated with "..." tap to expand
- Day headers: Sticky on scroll

**Component File**: `components/timeline/PhotoAlbum.tsx`

#### 2.3.3 Trip Statistics Card
**Location**: In memories tab

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Your Trip at a Glance                                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  ğŸ“… 5 days of adventure                                                 â”‚â”‚
â”‚  â”‚  ğŸ¯ 12 activities completed (2 skipped)                                  â”‚â”‚
â”‚  â”‚  â­ 4.2 average rating                                                  â”‚â”‚
â”‚  â”‚  ğŸ“¸ 23 memories captured                                                 â”‚â”‚
â”‚  â”‚  ğŸš¶ 15.3 km walked                                                       â”‚â”‚
â”‚  â”‚  â±ï¸ 4h 20m travel time                                                   â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â”‚  ğŸ† Highlight                                                            â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚
â”‚  â”‚  â”‚ [Photo] Colosseum Tour                         â­â­â­â­â­          â”‚   â”‚â”‚
â”‚  â”‚  â”‚         "Absolutely breathtaking! The audio guide was..."       â”‚   â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚
â”‚  â”‚                                                                          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Component File**: `components/timeline/TripStats.tsx`

---

## 3. Mobile-First Responsive Design

### 3.1 Breakpoint Strategy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Breakpoint    â”‚ Width      â”‚ Layout Changes                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Mobile        â”‚ < 640px    â”‚ Single column, bottom nav, full-width cards  â”‚
â”‚  Tablet        â”‚ 640-1024px â”‚ Two columns, side navigation option          â”‚
â”‚  Desktop       â”‚ > 1024px   â”‚ Three columns, sidebar for context           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 Mobile Bottom Sheet Pattern

All modals on mobile use bottom sheet pattern:

```typescript
interface BottomSheetProps {
  isOpen: boolean;
  onClose: () => void;
  snapPoints: ('full' | '75%' | '50%' | 'content')[];
  initialSnap?: number;
  children: React.ReactNode;
}
```

**Behavior**:
- Drag handle at top (pill indicator)
- Swipe down to dismiss
- Snap to defined points
- Backdrop blur behind sheet
- Safe area insets respected

### 3.3 Touch Interactions

| Gesture | Action |
|---------|--------|
| Swipe left on activity | Reveal skip action |
| Swipe right on activity | Reveal complete action |
| Long press on photo | Enter selection mode |
| Pinch on timeline | Zoom timeline view |
| Pull down on page | Refresh data |

---

## 4. Database Schema Changes

### 4.1 Trips Table Extensions

```sql
-- Add timeline-related columns to trips table
ALTER TABLE trips ADD COLUMN IF NOT EXISTS timeline_data JSONB DEFAULT '{}';
ALTER TABLE trips ADD COLUMN IF NOT EXISTS current_activity_id UUID;
ALTER TABLE trips ADD COLUMN IF NOT EXISTS trip_started_at TIMESTAMPTZ;
ALTER TABLE trips ADD COLUMN IF NOT EXISTS trip_completed_at TIMESTAMPTZ;

-- Create index for active trips
CREATE INDEX IF NOT EXISTS idx_trips_active
ON trips (user_id, status)
WHERE status = 'active';
```

### 4.2 Activity Ratings Table (New)

```sql
CREATE TABLE IF NOT EXISTS activity_ratings (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  trip_id UUID REFERENCES trips(id) ON DELETE CASCADE,
  activity_id TEXT NOT NULL,  -- References activity.id in itinerary JSON
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,

  -- Timing
  started_at TIMESTAMPTZ,
  completed_at TIMESTAMPTZ,
  actual_duration_minutes INTEGER,
  status TEXT DEFAULT 'upcoming' CHECK (status IN ('upcoming', 'in_progress', 'completed', 'skipped')),

  -- Rating
  rating SMALLINT CHECK (rating >= 1 AND rating <= 5),
  experience_notes TEXT,
  quick_tags TEXT[],  -- ['must-do', 'crowded', 'worth-it', 'skip-next-time']

  -- Metadata
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),

  UNIQUE(trip_id, activity_id)
);

-- RLS policies
ALTER TABLE activity_ratings ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can manage their own ratings"
ON activity_ratings
FOR ALL
USING (auth.uid() = user_id);
```

### 4.3 Activity Photos Table (New)

```sql
CREATE TABLE IF NOT EXISTS activity_photos (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  trip_id UUID REFERENCES trips(id) ON DELETE CASCADE,
  activity_id TEXT NOT NULL,
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,

  -- Photo data
  storage_path TEXT NOT NULL,  -- Path in Supabase Storage
  thumbnail_path TEXT,
  original_filename TEXT,
  file_size_bytes INTEGER,
  mime_type TEXT,

  -- Metadata
  caption TEXT,
  taken_at TIMESTAMPTZ,
  is_favorite BOOLEAN DEFAULT FALSE,
  exif_data JSONB,  -- Camera info, location, etc.

  -- Timestamps
  created_at TIMESTAMPTZ DEFAULT NOW(),

  CONSTRAINT valid_storage_path CHECK (storage_path ~ '^trip-photos/')
);

-- Indexes
CREATE INDEX idx_activity_photos_trip ON activity_photos(trip_id);
CREATE INDEX idx_activity_photos_activity ON activity_photos(trip_id, activity_id);

-- RLS policies
ALTER TABLE activity_photos ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can manage their own photos"
ON activity_photos
FOR ALL
USING (auth.uid() = user_id);
```

### 4.4 Trip Checklists Table (New)

```sql
CREATE TABLE IF NOT EXISTS trip_checklists (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  trip_id UUID REFERENCES trips(id) ON DELETE CASCADE,
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE,

  -- Item data
  text TEXT NOT NULL,
  category TEXT DEFAULT 'custom' CHECK (category IN ('booking', 'packing', 'document', 'custom')),
  is_checked BOOLEAN DEFAULT FALSE,
  due_date DATE,
  sort_order INTEGER DEFAULT 0,

  -- Auto-generated from activity?
  source_activity_id TEXT,  -- If generated from booking_required activity

  -- Timestamps
  created_at TIMESTAMPTZ DEFAULT NOW(),
  checked_at TIMESTAMPTZ
);

-- RLS policies
ALTER TABLE trip_checklists ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can manage their own checklists"
ON trip_checklists
FOR ALL
USING (auth.uid() = user_id);
```

### 4.5 Supabase Storage Bucket

```sql
-- Create storage bucket for trip photos
INSERT INTO storage.buckets (id, name, public)
VALUES ('trip-photos', 'trip-photos', false)
ON CONFLICT DO NOTHING;

-- Storage policies
CREATE POLICY "Users can upload their own photos"
ON storage.objects
FOR INSERT
WITH CHECK (
  bucket_id = 'trip-photos'
  AND auth.uid()::text = (storage.foldername(name))[1]
);

CREATE POLICY "Users can view their own photos"
ON storage.objects
FOR SELECT
USING (
  bucket_id = 'trip-photos'
  AND auth.uid()::text = (storage.foldername(name))[1]
);

CREATE POLICY "Users can delete their own photos"
ON storage.objects
FOR DELETE
USING (
  bucket_id = 'trip-photos'
  AND auth.uid()::text = (storage.foldername(name))[1]
);
```

---

## 5. API Endpoints

### 5.1 Timeline APIs

```typescript
// GET /api/trips/[id]/timeline
// Returns timeline-specific data for a trip

// POST /api/trips/[id]/timeline/start
// Marks trip as active, sets current_activity

// POST /api/trips/[id]/activities/[activityId]/complete
// Body: { rating?: number, notes?: string, tags?: string[] }

// POST /api/trips/[id]/activities/[activityId]/skip
// Body: { reason?: string }

// GET /api/trips/[id]/stats
// Returns calculated trip statistics
```

### 5.2 Photo Upload API

```typescript
// POST /api/trips/[id]/photos
// Multipart form: { file: File, activityId: string, caption?: string }
// Returns: { id, url, thumbnailUrl }

// DELETE /api/trips/[id]/photos/[photoId]

// PATCH /api/trips/[id]/photos/[photoId]
// Body: { caption?: string, isFavorite?: boolean }
```

### 5.3 Checklist API

```typescript
// GET /api/trips/[id]/checklist

// POST /api/trips/[id]/checklist
// Body: { text: string, category: string, dueDate?: string }

// PATCH /api/trips/[id]/checklist/[itemId]
// Body: { isChecked?: boolean, text?: string }

// DELETE /api/trips/[id]/checklist/[itemId]
```

---

## 6. Animation & Micro-interactions

### 6.1 Animation Library
Using Framer Motion for React animations with custom variants.

### 6.2 Key Animations

```typescript
// Countdown flip animation
const countdownFlip = {
  initial: { rotateX: -90, opacity: 0 },
  animate: { rotateX: 0, opacity: 1 },
  exit: { rotateX: 90, opacity: 0 },
  transition: { duration: 0.3, ease: "easeInOut" }
};

// Activity complete celebration
const completeCelebration = {
  initial: { scale: 0.8, opacity: 0 },
  animate: {
    scale: [0.8, 1.1, 1],
    opacity: 1,
    transition: { duration: 0.4, ease: "easeOut" }
  }
};

// Rating star fill
const starFill = {
  initial: { scale: 0, rotate: -180 },
  animate: {
    scale: 1,
    rotate: 0,
    transition: { type: "spring", stiffness: 500, damping: 30 }
  }
};

// Slide to complete track
const slideComplete = {
  whileDrag: { scale: 1.05 },
  drag: "x",
  dragConstraints: { left: 0, right: 260 },
  dragElastic: 0.1,
  onDragEnd: (_, info) => {
    if (info.offset.x > 200) {
      // Trigger completion
    }
  }
};
```

### 6.3 Haptic Feedback (Mobile)
```typescript
const haptic = {
  light: () => navigator.vibrate?.(10),
  medium: () => navigator.vibrate?.(20),
  heavy: () => navigator.vibrate?.([30, 20, 30]),
  success: () => navigator.vibrate?.([10, 50, 10, 50, 10]),
};
```

---

## 7. Implementation Roadmap

### Phase 1: Foundation (Week 1-2)
**Goal**: Database schema and basic timeline state management

1. **Database migrations**
   - [ ] Create activity_ratings table
   - [ ] Create activity_photos table
   - [ ] Create trip_checklists table
   - [ ] Set up storage bucket
   - [ ] Add timeline_data column to trips

2. **Type definitions**
   - [ ] Extend Activity type with timeline fields
   - [ ] Create TimelineState types
   - [ ] Update Trip type

3. **API routes**
   - [ ] GET /api/trips/[id]/timeline
   - [ ] POST /api/trips/[id]/timeline/start
   - [ ] Activity completion/skip endpoints

### Phase 2: Pre-Trip Experience (Week 3-4)
**Goal**: Countdown and preparation features

4. **CountdownHero component**
   - [ ] Animated countdown display
   - [ ] Weather forecast integration
   - [ ] Destination image handling

5. **PreTripChecklist component**
   - [ ] Checklist CRUD operations
   - [ ] Auto-generate from booking_required activities
   - [ ] Progress indicator

6. **WeatherForecast component**
   - [ ] Open-Meteo API integration
   - [ ] 7-day forecast display
   - [ ] Smart weather tips

### Phase 3: Live Journey Mode (Week 5-7)
**Goal**: Active trip tracking and rating

7. **LiveJourneyHeader component**
   - [ ] Day progress visualization
   - [ ] Current/next activity preview
   - [ ] Real-time countdown

8. **LiveActivityCard component**
   - [ ] Status tracking (upcoming/in_progress/completed/skipped)
   - [ ] Slide to complete gesture
   - [ ] Quick action buttons

9. **ActivityRatingModal component**
   - [ ] 5-star rating input
   - [ ] Quick tags selection
   - [ ] Notes input

10. **QuickPhotoCapture component**
    - [ ] Camera integration
    - [ ] Photo upload to Supabase Storage
    - [ ] Caption input

### Phase 4: Post-Trip Memories (Week 8-9)
**Goal**: Trip completion and photo album

11. **TripCompleteHero component**
    - [ ] Completion celebration
    - [ ] Trip statistics display
    - [ ] Share options

12. **PhotoAlbum component**
    - [ ] Photo grid by day
    - [ ] Favorite marking
    - [ ] Caption editing

13. **TripStats component**
    - [ ] Calculated statistics
    - [ ] Highlight activity
    - [ ] Visual metrics

### Phase 5: Polish & Integration (Week 10)
**Goal**: UX refinement and testing

14. **Mobile navigation updates**
    - [ ] Tab navigation in trip detail
    - [ ] Bottom sheet implementations
    - [ ] Touch gesture handling

15. **Animations and transitions**
    - [ ] Framer Motion integration
    - [ ] Haptic feedback
    - [ ] Loading states

16. **Testing and optimization**
    - [ ] Component testing
    - [ ] Performance optimization
    - [ ] Cross-browser testing

---

## 8. File Structure

```
components/
â”œâ”€â”€ timeline/
â”‚   â”œâ”€â”€ CountdownHero.tsx
â”‚   â”œâ”€â”€ PreTripChecklist.tsx
â”‚   â”œâ”€â”€ WeatherForecast.tsx
â”‚   â”œâ”€â”€ LiveJourneyHeader.tsx
â”‚   â”œâ”€â”€ LiveActivityCard.tsx
â”‚   â”œâ”€â”€ ActivityRatingModal.tsx
â”‚   â”œâ”€â”€ QuickPhotoCapture.tsx
â”‚   â”œâ”€â”€ TripCompleteHero.tsx
â”‚   â”œâ”€â”€ PhotoAlbum.tsx
â”‚   â”œâ”€â”€ TripStats.tsx
â”‚   â””â”€â”€ index.ts  (barrel export)
â”œâ”€â”€ ui/
â”‚   â”œâ”€â”€ BottomSheet.tsx
â”‚   â”œâ”€â”€ SlideToAction.tsx
â”‚   â””â”€â”€ StarRating.tsx

lib/
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useTimeline.ts
â”‚   â”œâ”€â”€ useActivityRating.ts
â”‚   â”œâ”€â”€ usePhotoUpload.ts
â”‚   â””â”€â”€ useWeatherForecast.ts
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ timeline-service.ts
â”‚   â””â”€â”€ photo-service.ts

app/
â”œâ”€â”€ api/
â”‚   â””â”€â”€ trips/
â”‚       â””â”€â”€ [id]/
â”‚           â”œâ”€â”€ timeline/
â”‚           â”‚   â””â”€â”€ route.ts
â”‚           â”œâ”€â”€ activities/
â”‚           â”‚   â””â”€â”€ [activityId]/
â”‚           â”‚       â”œâ”€â”€ complete/route.ts
â”‚           â”‚       â””â”€â”€ skip/route.ts
â”‚           â”œâ”€â”€ photos/
â”‚           â”‚   â””â”€â”€ route.ts
â”‚           â””â”€â”€ checklist/
â”‚               â””â”€â”€ route.ts

types/
â”œâ”€â”€ timeline.ts  (new timeline-specific types)
â””â”€â”€ index.ts (updated)
```

---

## 9. Success Metrics

### 9.1 Engagement Metrics
- **Pre-trip engagement**: % of users who interact with checklist/countdown
- **Live tracking adoption**: % of trips that use live tracking features
- **Photo upload rate**: Average photos per trip
- **Rating completion rate**: % of activities rated

### 9.2 Retention Metrics
- **Return to trip detail**: Visits to completed trip pages
- **Photo album engagement**: Time spent in memories tab
- **Social shares**: Number of trip summaries shared

### 9.3 Technical Metrics
- **API response times**: < 200ms for timeline endpoints
- **Photo upload speed**: < 3s for mobile uploads
- **Animation frame rate**: Maintain 60fps

---

## 10. Future Enhancements (Post-Launch)

1. **Social Features**
   - Share trip memories as Instagram-style stories
   - Collaborative trips with multiple travelers
   - Public trip templates

2. **AI Enhancements**
   - Auto-generate trip summaries using AI
   - Smart photo captions
   - Personalized recommendations based on ratings

3. **Gamification**
   - Achievement badges (e.g., "Photo Master", "Early Bird")
   - Trip streaks
   - Destination collector map

4. **Integrations**
   - Calendar sync for pre-trip reminders
   - Apple/Google Photos integration
   - Flight status updates
